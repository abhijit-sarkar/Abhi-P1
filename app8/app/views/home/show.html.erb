<h4><b>List of policies:</b></h4>

<div class = "jumbotron" >
  
  <div class = "table-responsive" >
    
    <table class = "table table-striped table-hover" >
      
      <thead>
	<th>Customer Name</th>	
	<th>Plan Name</th>
	<th>Company Name</th>
	<th>Sum Insured</th>
	<th>Duration</th>
	<th>Premium</th>
	<th>Nominee</th>
	<th>Maturity Amt.</th>
	<th>Maturity Date</th>
      </thead>
      
      <% @pols.each do |f| %>
      <tbody>
	<% if params[:id].to_i == 15 %>
	  <% if ( f.maturity_date.to_date - Time.now.to_date).to_i <= params[:id].to_i %>

	   <tr>
	     <td><%= Customer.find(f.customer_id).customer_name %></td>
	     <td><%= Plan.find(f.plan_id).plan_name  %></td>
	     <td><%= Company.find(Plan.find(f.plan_id).company_id).company_name %></td>   	        
	     <td>Rs.<%= f.sum_insured %></td>	    
	     <td><%= f.duration %> years</td>
	     <td>Rs.<%= f.premium %></td>
	     <td>Mr./Mrs.<%= f.nominee %></td>
	     <td>Rs.<%= f.maturity_amount %></td>
	     <td><%= f.maturity_date %></td>	     
	   </tr>
	   
	  <% end %>	   
	 <% else %>
	   <% if ( f.maturity_date.to_date.year - Time.now.to_date.year).to_i <= params[:id].to_i %>
	    
	      <tr>
		<td><%= Customer.find(f.customer_id).customer_name %></td>
		<td><%= Plan.find(f.plan_id).plan_name  %></td>
		<td><%= Company.find(Plan.find(f.plan_id).company_id).company_name %></td>   	        
		<td>Rs.<%= f.sum_insured %></td>	    
		<td><%= f.duration %> years</td>
		<td>Rs.<%= f.premium %></td>
		<td>Mr./Mrs.<%= f.nominee %></td>
		<td>Rs.<%= f.maturity_amount %></td>
		<td><%= f.maturity_date %></td>		
	      </tr>
	      
	    <% end %>
	  <% end %>
	<% end %>
      </tbody>
      
    </table>
    
  </div>
  
</div>

<%= link_to "Back" , home_index_path , class: "btn btn-primary btn-md" %>


